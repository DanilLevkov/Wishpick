# Wishpick
Телеграмм бот для поиска подарков и публикации 

## Архитектура
Бот состоит из нескольких сервисов:

### Firebase Realtime Database
Используется как основная база данных. Вхаимодействие с ней происходит посредством Firebase SDK.
Является нереляционной БД на основе JSON, что позволяет легко добавлять новые атрибуты к объектам.
Для подключения в директорию *credentials* требуется положить файл `firebase_auth.json`, скачанный с сайта firebase и содержаший информацию для аутентификации.

### Firebase Cloud Storage
Используется для постоянного хранения тяжелых файлов, таких как картинки и видео.


### Aiogram bot (docker image)
Непосредственно код самого бота, его бизнес логика, обратобка сообщений от пользователя.
В данном случае используется асинхронная библиотека aiogram 3, благодаря чему можно осуществлять продолжительные
запросы к другим сервисам, не останавливая процесс обработки других сообщений.
Токен бота необходимо указать в файле `.env` из директории *credentials*, заполнив его переменными окружения:
```
WISHPICK_BOT_TOKEN = <bot token>
WISHPICK_FIREBASE_REALTIME_DB = <db link>
WISHPICK_FIREBASE_STORAGE = <db link>
```

### Web Parser (docker image)
Система позволяющая реализовать распознавание ссылок на определенные товары из интернет магазинов.
На данный момент поддерживается только Ozon.
Информация загружается посредством парсинга json, полученного из api маркетплейса.


### Selenium Standalone Firefox
Образ, где запущен полноценный браузер, позволяющий получить доступ к запросам, недоступным через
обычные библиотеки наподобии *requests*.
Web Parser подключается к нему через удаленную сессию webdriver.Remote.

Все docker образы связаны через внутреннюю сеть app-network типа bridge.

## Функционал
Бот поддерживает следующий список команд:
-   `/start` - запуск и первичная информация
-   `/help` - подробная информация
-   `/top` - списко самых востребованных подарков

Также боту можно отправить ссылку на маркетплейс, которую он преобразует в удобный формат и 
сохраняет в своей базе.
